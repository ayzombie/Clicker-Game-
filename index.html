<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: linear-gradient(to right, #74ebd5, #acb6e5);
    font-family: Arial, sans-serif;
    overflow: hidden;
    margin: 0;
  }
  h1 { 
    font-size: 5rem; 
    margin: 10px; 
  }
  #score {
    font-size: 2rem;
    font-weight: bolder;
    padding: 20px;
  }
  #multiplier {
    position: absolute;
    font-size: 1.3rem;
    color: red;
    top: 205px;
    font-weight: normal;
  }

  @keyframes popEffect {
  0% { transform: scale(1); color: red; font-size: 2.5rem; font-weight: bold;}
  50% { transform: scale(12); color: gold; text-shadow: 0 0 15px gold; font-size: 3rem; font-weight: bolder;}
  100% { transform: scale(1); color: red; text-shadow: none; font-size: 2rem; font-weight: normal;}
}

.animate-multi {
  animation: popEffect 1s ease;
}

  #cps { 

    font-size: 1.5rem; 
    margin: 10px; 
    font-weight: bold; 
    color: green;

  }
  button {            
    padding: 10px 20px;
    font-size: 1rem;
    border: none;
    border-radius: 10px;
    background: #ff6f61;
    color: white;
    cursor: pointer;
    margin: 5px;
    transition: transform 0.1s ease, background 0.2s;
  }
  button:hover { background: #ff4b3e; }
  button:active { transform: scale(0.9); }
  .shop { margin-top: 10px; display: flex; flex-direction: column; align-items: center; }
  canvas { position: absolute; top: 0; left: 0; z-index: -1; }
</style>
</head>
<body>

<h1>Shape Clicker</h1>
<div id="score"> Score: 0</div> 
<div id="multiplier">Ã—1</div>

<button onclick="addPoint()">Click Me!</button>
<div id="cps">CPS: 0</div>

<div class="shop">
  <h2>Shop</h2>
  <button id="upgradeBtn" onclick="buyUpgrade()">Upgrade Click (+1) â€” Cost: 10</button>
  <button id="autoClickerBtn" onclick="buyAutoClicker()">Upgrade Speed â€” Cost: 50</button>
  <button id="ballSpawnerBtn" onclick="buyBallSpawner()">Add Ball â€” Cost: 100</button>
  <button id="squareSpawnerBtn" onclick="buySquareSpawner()">Add Square â€” Cost: 200</button>
  <button id="triangleSpawnerBtn" onclick="buyTriangleSpawner()">Add Triangle â€” Cost: 500</button>
  <button id="ballValueBtn" onclick="buyBallValue()">Increase Value â€” Cost: 1000</button>
  <button id="rebirth" onclick="rebirth()">REBIRTH â€” COST: 1000000</button>
  <button onclick="restartGame()">Restart Game</button>
</div>

<div id="sidebar">
  <label for="num">Enter a Number for Gifts!</label>
  <input type="number" id="num" placeholder="Type a number">
  <button id="submit">Submit</button>
</div>

<canvas id="gameCanvas"></canvas>


<script>  //start of javascript     variables!!!!!!!
let score = 1;
let pointsPerClick = 1;
let upgradeCost = 10;
let multi = 1;

let autoClickerLevel = 1;
let autoClickerCost = 100;

let ballSpawnerCount = 0;
let ballSpawnerCost = 200;

let squareSpawnerCount = 0;
let squareSpawnerCost = 500;

let triangleSpawnerCount = 0;
let triangleSpawnerCost = 500;

let ballValue = 1;
let squareValue = 2;
let triangleValue = 5;

let ballValueCost = 1000;

let balls = [];
let squares = [];
let triangles = [];

let rebirthCost = 100000;
let growingCostMulti = 1.5;

const input = document.getElementById("num");
const button = document.getElementById("submit");
const output = document.getElementById("output");

button.addEventListener("click", () => {                                                                             //cheat codes!!!!
  let value = Number(input.value);
  if (value === 69420) {
    score += 10000000;
    updateScore();
  }
  input.value = "";
});

const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

function resizeCanvas() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
window.addEventListener("resize", resizeCanvas);
resizeCanvas();

class Ball {                    //START OF CLASSES!!!!!!!!!
  constructor(x = Math.random() * canvas.width, y = Math.random() * canvas.height, dx = null, dy = null) {
    this.x = x;
    this.y = y;
    this.dx = dx !== null ? dx : (Math.random() * 2 - 1) * autoClickerLevel;
    this.dy = dy !== null ? dy : (Math.random() * 2 - 1) * autoClickerLevel;
    this.radius = 15;
  }

  update() {
    this.x += this.dx;
    this.y += this.dy;

    if (this.x <= 0 || this.x >= canvas.width) {
      this.dx *= -1;
      score += (ballValue * multi);
      updateScore();
    }
    if (this.y <= 0 || this.y >= canvas.height) {
      this.dy *= -1;
      score += (ballValue * multi);
      updateScore();
    }
  }

  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
    ctx.fillStyle = "#ff6f61";
    ctx.fill();
    ctx.closePath();
  }
}

class Square {
  constructor(x = Math.random() * canvas.width, y = Math.random() * canvas.height, dx = null, dy = null) {
    this.x = x;
    this.y = y;
    this.dx = dx !== null ? dx : (Math.random() * 2 - 1) * autoClickerLevel * 1.5;
    this.dy = dy !== null ? dy : (Math.random() * 2 - 1) * autoClickerLevel * 1.5;
    this.size = 25;
  }

  update() {
    this.x += this.dx;
    this.y += this.dy;

    if (this.x <= 0 || this.x + this.size >= canvas.width) {
      this.dx *= -1;
      score += squareValue;
      updateScore();
    }
    if (this.y <= 0 || this.y + this.size >= canvas.height) {
      this.dy *= -1;
      score += squareValue;
      updateScore();
    }
  }

  draw() {
    ctx.fillStyle = "#61a0ff";
    ctx.fillRect(this.x, this.y, this.size, this.size);
  }
}

class Triangle {
  constructor(x = Math.random() * canvas.width, y = Math.random() * canvas.height, dx = null, dy = null) {
    this.x = x;
    this.y = y;
    this.dx = dx !== null ? dx : (Math.random() * 2 - 1) * autoClickerLevel * 2;
    this.dy = dy !== null ? dy : (Math.random() * 2 - 1) * autoClickerLevel * 2;
    this.size = 30; // ðŸ‘ˆ side length
  }

  update() {
    this.x += this.dx;
    this.y += this.dy;

    if (this.x <= 0 || this.x + this.size >= canvas.width) {
      this.dx *= -1;
      score += triangleValue;
      updateScore();
    }
    if (this.y <= 0 || this.y + this.size >= canvas.height) {
      this.dy *= -1;
      score += triangleValue;
      updateScore();
    }
  }

  draw() {
    ctx.fillStyle = "#ffa500"; // orange
    ctx.beginPath();
    ctx.moveTo(this.x, this.y);                        // top point
    ctx.lineTo(this.x - this.size / 2, this.y + this.size);
    ctx.lineTo(this.x + this.size / 2, this.y + this.size);;
    ctx.closePath();
    ctx.fill();
  }
}

                                        // Click + upgrades               //ENDD OF  CLASSES!!!!!
function addPoint() { 
  score += (pointsPerClick * multi);
  updateScore(); 
}

function buyUpgrade() {                   //UPGRADE CLICK
  if (score >= upgradeCost) {
    score -= upgradeCost;
    pointsPerClick++;
    upgradeCost = Math.floor(upgradeCost * 1.25);
    updateShop();
    updateScore();
  }
}

function buyAutoClicker() {             //upgrade speed!
  if (score >= autoClickerCost) {
    score -= autoClickerCost;
    autoClickerLevel++;
    autoClickerCost = Math.floor(autoClickerCost * 1.4);
    balls.forEach(b => { b.dx *= 1.2; b.dy *= 1.2; });
    squares.forEach(s => { s.dx *= 1.2; s.dy *= 1.2; });
    updateShop();
    updateScore();
  }
}

function buyBallSpawner() {                 //more balls!
  if (score >= ballSpawnerCost) {
    score -= ballSpawnerCost;
    ballSpawnerCount++;
    ballSpawnerCost = Math.floor(ballSpawnerCost * 1.15);
    balls.push(new Ball());
    updateShop();
    updateScore();
  }
}

function buySquareSpawner() {               //MORE SQUARES
  if (score >= squareSpawnerCost) {
    score -= squareSpawnerCost;
    squareSpawnerCount++;
    squareSpawnerCost = Math.floor(squareSpawnerCost * 1.25);
    squares.push(new Square());
    updateShop();
    updateScore();
  }
}

function buyTriangleSpawner() {           //MORE TRIANGLES
  if (score >= triangleSpawnerCost) {
    score -= triangleSpawnerCost;
    triangleSpawnerCount++;
    triangleSpawnerCost = Math.floor(triangleSpawnerCost * 1.3);
    triangles.push(new Triangle());
    updateShop();
    updateScore();
  }
}

function buyBallValue() {           //mORE VALUE LETS GO BABY!
  if (score >= ballValueCost) {
    score -= ballValueCost;
    ballValue++;
    squareValue += 2;
    triangleValue += 5;
    ballValueCost = Math.floor(ballValueCost * 1.8);
    updateShop();
    updateScore();
  }
}

// Drawing
function animate() {                  //ANIMATION!
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  balls.forEach(ball => { 
    ball.update(); 
    ball.draw(); 
  });

  squares.forEach(square => { 
    square.update(); 
    square.draw(); 
  });

  triangles.forEach(triangle => {
    triangle.update();
    triangle.draw();
  });

  requestAnimationFrame(animate);
}

function updateShop() {           //UPDATE THE SHOP
  document.getElementById("upgradeBtn").innerText = "Upgrade Click (+" + pointsPerClick + ") â€” Cost: " + upgradeCost;
  document.getElementById("autoClickerBtn").innerText = "Upgrade Speed (Lv " + autoClickerLevel + ") â€” Cost: " + autoClickerCost;
  document.getElementById("ballSpawnerBtn").innerText = "Add Ball (Now " + ballSpawnerCount + ") â€” Cost: " + ballSpawnerCost;
  document.getElementById("squareSpawnerBtn").innerText = "Add Square (Now " + squareSpawnerCount + ") â€” Cost: " + squareSpawnerCost;
  document.getElementById("ballValueBtn").innerText = "Increase Value (Now " + ballValue + ") â€” Cost: " + ballValueCost;
  document.getElementById("triangleSpawnerBtn").innerText = "Add Triangle (Now " + triangleSpawnerCount + ") â€” Cost: " + triangleSpawnerCost;
  document.getElementById("rebirth").innerText = "REBIRTH (Multi:  " + multi + ") â€” Cost: " + rebirthCost;
} 

function updateScore() {                    //UPDATE SCORE!
  document.getElementById("score").innerText = "Score: " + Math.floor(score); 
  document.getElementById("multiplier").innerText = "Ã—" + multi;
  saveGame();
}

                                        // Save / Load
function saveGame() {                         //SAVE GAME
  const saveData = {
    score, pointsPerClick, upgradeCost,
    autoClickerLevel, autoClickerCost,
    ballSpawnerCount, ballSpawnerCost,
    squareSpawnerCount, squareSpawnerCost,
    ballValue, ballValueCost,
    balls: balls.map(b => ({x: b.x, y: b.y, dx: b.dx, dy: b.dy})),
    squares: squares.map(s => ({x: s.x, y: s.y, dx: s.dx, dy: s.dy})),
    triangles: triangles.map(t => ({x: t.x, y: t.y, dx: t.dx, dy: t.dy})),
    multi, rebirthCost, growingCostMulti
  };
  localStorage.setItem("clickerSave", JSON.stringify(saveData));
}

function loadGame() {                   //LOAD GAME
  const saved = JSON.parse(localStorage.getItem("clickerSave"));
  if (saved) {
    score = saved.score || 0;
    pointsPerClick = saved.pointsPerClick || 1;
    upgradeCost = saved.upgradeCost || 10;
    autoClickerLevel = saved.autoClickerLevel || 1;
    autoClickerCost = saved.autoClickerCost || 50;
    ballSpawnerCount = saved.ballSpawnerCount || 1;
    ballSpawnerCost = saved.ballSpawnerCost || 200;
    squareSpawnerCount = saved.squareSpawnerCount || 0;
    squareSpawnerCost = saved.squareSpawnerCost || 200;
    ballValue = saved.ballValue || 1;
    ballValueCost = saved.ballValueCost || 500;
    multi = saved.multi || 1;
    rebirthCost = saved.rebirthCost || 1000000;
    growingCostMulti = saved.growingCostMulti || 1.5;

    triangles = [];
    if (saved.triangles && saved.triangles.length > 0) {
      saved.triangles.forEach(t => triangles.push(new Triangle(t.x, t.y, t.dx, t.dy)));
    }

    balls = [];
    if (saved.balls && saved.balls.length > 0) {
      saved.balls.forEach(b => balls.push(new Ball(b.x, b.y, b.dx, b.dy)));
    } else {
      for (let i = 0; i < ballSpawnerCount; i++) balls.push(new Ball());
    }

    squares = [];
    if (saved.squares && saved.squares.length > 0) {
      saved.squares.forEach(s => squares.push(new Square(s.x, s.y, s.dx, s.dy)));
    } else {
      for (let i = 0; i < squareSpawnerCount; i++) squares.push(new Square());
    }
  } else {
    for (let i = 0; i < ballSpawnerCount; i++) balls.push(new Ball());
  }
  updateShop();
  updateScore();
}

function restartGame() {      
  multi = 1;          //RESTART GAME
  score = 0;
  pointsPerClick = 1;
  upgradeCost = 10;
  autoClickerLevel = 1;
  autoClickerCost = 50;

  ballSpawnerCount = 0;
  ballSpawnerCost = 100;

  squareSpawnerCount = 0;
  squareSpawnerCost = 200;

  triangleSpawnerCount = 0;
  triangleSpawnerCost = 500

  ballValue = 1;
  squareValue = 2;
  triangleValue = 5;
  ballValueCost = 1000;

  balls = [];
  squares = [];
  triangles = []

  growingCostMulti = 1.5;
  rebirthCost = 100000

  updateShop(); 
  updateScore();
  saveGame();
}

//                                    CUSTOM STUFF!

function wait(ms) {       //wait function
  return new Promise(resolve => setTimeout(resolve, ms));
}

async function rebirth() {
  if (score >= rebirthCost) { // check cost
                                  //the ffing andimation lol!dfsd
  const multiEl = document.getElementById("multiplier");
  multiEl.classList.add("animate-multi");
  setTimeout(() => multiEl.classList.remove("animate-multi"), 1005);

  let cur_score = score;
  
  while (score > 0) {
    score -= getRandom(0.001 * cur_score, 0.01 * cur_score);
    updateScore();
    if (score < 0) 
      score = 0;
      updateScore();
      await wait(1);
  }
    score = 0;
    cur_score = 0;
    pointsPerClick = 1;
    ballSpawnerCount = 0;
    squareSpawnerCount = 0;
    triangleSpawnerCount = 0;
    balls = [];
    squares = [];
    triangles = [];

    multi += 1;
    let newRebirthCost = rebirthCost * growingCostMulti;
    if (newRebirthCost < 1000000) {
      growingCostMulti *= 1.2;
    }
    if (newRebirthCost >= 1000000 && newRebirthCost < 10000000) {
      growingCostMulti *= 1.05;
    }
    if (newRebirthCost >= 10000000 < 100000000) {
      growingCostMulti *= 1.01;
    }
    else {
      growingCostMulti *= 1.001
    }
    rebirthCost = Math.floor(newRebirthCost);

    updateShop();
    updateScore();



    saveGame();
  }
}
function getRandom(min, max) {       //random number function!!!!
  return Math.floor(Math.random() * (max - min + 1)) + min;
}



loadGame();                   
animate();                      //END OF JAVASCRIPT
</script>
